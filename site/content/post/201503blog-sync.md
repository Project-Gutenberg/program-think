---
layout: default
title: '提供&#8220;博客离线浏览&#8221;和&#8220;电子书制作脚本&#8221;&#8212;&#8212;用 BT Sync&#65288;Resilio Sync&#65289;&#12304;免翻墙&#12305;自动同步'
date: None
author:
    display_name: 
---

　　先提醒一下：“BT Sync”已经改名为“Resilio Sync”，但俺还是习惯于叫它原来的名字。 　　今年1月份，俺开始通过 BT Sync（Resilio Sync）自动同步俺网盘上的电子书，以取代流量受限的 Dropbox 网盘。之后，有几位热心读者建议俺把“博客打包电子书”也通过 BT Sync 进行自动同步。

　　前段时间，俺折腾了一下，已经基本搞定。今天发一篇博文通告大伙儿。

  
　　如果你曾经使用过“离线下载工具”，应该知道俺所说的“离线浏览”是啥意思。 　　所谓的“离线下载工具”，可以把整个网站的页面内容，下载到本地——变成存储在你本机的网页。下载完成之后，你可以用浏览器浏览这些本地的页面（此时无需联网）。 　　俺这次提供的“离线浏览”功能，大致也是如此。差别在于——你无需再使用“离线下载工具”，只需使用 BT Sync 进行【自动同步】。

**“博客离线浏览页面”的 BT Sync 同步密钥是：**
B7P64IMWOCXWEYOXIMBX6HN5MHEULFS4V

　　没用过 BT Sync 的同学，先看教程：《[扫盲 BT Sync——不仅是同步利器，而且是【分布式】网盘](https://program-think.blogspot.com/2015/01/BitTorrent-Sync.html)》。 　　首先，把上述密钥添加到你的 BT Sync 客户端。 　　其次，确保你的 BT Sync 已经完成同步（同步目录对应的图标变为绿色）。

　　最后，打开这个 BT Sync 同步目录，在同步目录下，找到一个名叫 **html** 的目录，然后用浏览器打开该目录下的 **index.html** 页面，就可以看了。

　　至少有如下几点：

　　**1\. 应对 GFW 的封杀**

　　最近5年来，俺长期在博客上介绍翻墙教程。但是因为本博客已经被 GFW 封杀。你需要先翻墙，才能看到俺写的翻墙教程。这时候就存在一个“先有鸡还是先有蛋”两难困境。 　　而且最近一年多来，GFW 的封锁越来越严厉。万一你手头的翻墙工具全部都失效了，那么你就无法再访问俺博客了。 　　如今俺提供了离线浏览，你可以把俺博客的全部内容通过 BT Sync 同步到你自己的电脑上。一旦你手头的翻墙工具失效了，你还可以继续看俺写的翻墙教程，然后去搞定其它翻墙工具。

　　**2\. 无须联网**

　　在没法联网的设备上，也可以看俺博客的内容。

　　**3\. 便于分享**

　　如果你看得起俺写的东西，想要分享给周围的人。就可以把离线页面直接打包，然后通过各种方式（比如邮件）转发给你的朋友。 　　使用 BT Sync 至少有如下几个好处：

　　**1\. 免翻墙**

　　由于俺的博客长期被 GFW 封杀。这点非常重要。

　　**2\. 增量同步**

　　BT Sync 会智能地判断——哪些页面/图片更新了。然后，它只同步那些更新过的页面和图片。

　　**3\. 自动同步**

　　所谓的“自动”就是说，你只需把 BT Sync 一直开着，一旦俺这边有更新，BT Sync 自动把新内容同步到你本机。  
  
　　一年前（2014年4月），[俺开始提供博客内容的打包下载](https://program-think.blogspot.com/2014/04/blog-ebook.html)。当时提供的电子书格式是 CHM 和 EPUB。 　　今后，俺【不再提供】这两个格式的打包下载，改为提供“电子书制作脚本”。 　　有了“电子书制作脚本”，你可以把俺博客的“离线浏览页面”制作成电子书（具体使用方法，待会儿告诉你）。 　　目前的“电子书制作脚本”支持两种格式（CHM 和 EPUB）。如果大伙儿有需要，可以考虑增加其它格式。 　　因为俺博客的内容越来越多，因此，打包之后的 CHM 和 EPUB 也越来越大（如今已经超过 150 兆）。每次有博文更新，俺都要重新上传这两种格式的文件（加起来就是 300 MB），非常费劲。而且会增加俺的风险（被“流量分析”的风险）。 　　另外，大伙儿从微软网盘下载这两个大文件，也非常费劲（微软网盘有时候会有故障）。 　　有了电子书制作脚本，俺每次只需同步新增的博文，然后由你自己在电脑上运行制作脚本，把电子书做出来。

　　**别怕，俺提供的脚本是非常傻瓜化的，可以【一键式生成电子书】。**

　　制作“CHM 格式”的具体步骤如下： 1. 确保你已经完成 BT Sync 的同步（在界面上，该同步目录的图标变为绿色）。 2. 打开对应的同步目录

3a. 使用 Windows 系统的同学，进入如下目录： `blog\make\chm` 并双击 `make-chm.wsf`

  
3b. 使用 Linux 或苹果系统的同学，进入如下目录： `blog/make/chm` 并运行 Python 脚本 `make-chm.py`（该脚本同时兼容 Python2 和 Python3）

　　**备注**

　　因为俺目前找不到任何开源的库，能够生成 chm 格式（只有解开 chm 格式的库，没有生成的库）。所以俺不得不依赖微软的编译器（hhc）。

　　所幸这玩意儿是绿色的，只需两个文件（`hhc.exe` 和 `hha.dll`），所以俺把这两个文件放到了同步目录中。

  
　　因为这两个文件【没有】内置数字签名，为了让大伙儿放心，俺特地注明了这两个文件在 VirusTotal 的病毒扫描结果（[这里](https://www.virustotal.com/en/file/3e96894609819ae3d595ff6e0fbe9ce6c9ac17bdeda256b994831992f668cb99/analysis/)和[这里](https://www.virustotal.com/en/file/32003df5ecd25fa39a0c410a487c8b8440758f199eb4032b4ec03cd8f1da220c/analysis/)）。在这两个扫描页面上，已经注明了这两个文件都是来自微软的【可信任文件】。  
　　由于要依赖微软的编译器，所以，使用 Linux/Unix 的同学，需要 [Wine](https://en.wikipedia.org/wiki/Wine_(software)) 才能制作 chm 格式的电子书。并且你要把 `hhc.exe` 和 `hha.dll` 放置到 wine 的可执行文件搜索路径中。 　　制作“EPUB 格式”的具体步骤如下： 1. 确保你已经完成 BT Sync 的同步（在界面上，该同步目录的图标变为绿色）。 2. 打开对应的同步目录

3a. 使用 Windows 系统的同学，进入如下目录： `blog\make\epub` 并双击 `make-epub.wsf`

  
3b. 使用 Linux 或苹果系统的同学，进入如下目录： `blog/make/epub` 并运行 Python 脚本 `make-epub.py`（该脚本同时兼容 Python2 和 Python3）  
　　**Windows 系统** 　　Windows 系统默认就支持 CHM 格式的阅读。你只需双击该文件，既可打开。

　　**【非】Windows 系统**

  
　　不使用 Windows 系统的同学，可以参考维基百科的“[这个页面](https://en.wikipedia.org/wiki/Microsoft_Compiled_HTML_Help)”，列出了“【非】Windows”下的 CHM 阅读软件。  
　　EPUB 的阅读软件很多，而且各个平台（Windows、Linux、Mac OS X、Android、iOS）都有。维基百科的[这个页面](https://zh.wikipedia.org/wiki/EPUB)列出了常用的 EPUB 阅读软件。 　　由于俺的时间和精力有限，上述制作脚本只在少数几种操作系统上进行测试。 　　如果在你的环境中，电子书制作脚本无法正常工作，拜托你到俺博客留言，反馈你碰到的问题。俺会尽快解决。

**俺博客上，和本文相关的帖子（需翻墙）**：

  
[扫盲 BTSync（Resilio Sync）——不仅是同步利器，而且是【分布式】网盘](https://program-think.blogspot.com/2015/01/BitTorrent-Sync.html)  
[聊聊 GFW 如何封杀 Resilio Sync（BTSync）？以及如何【免翻墙】继续使用？](https://program-think.blogspot.com/2017/08/GFW-Resilio-Sync.html)  
[开始提供博客内容打包下载（支持 CHM 和 EPUB 格式）](https://program-think.blogspot.com/2014/04/blog-ebook.html)

